spring.application.name=playlizt-api-gateway
server.port=${SERVER_PORT}

# Eureka Client Configuration
eureka.client.service-url.defaultZone=${EUREKA_CLIENT_SERVICEURL_DEFAULTZONE}
eureka.instance.prefer-ip-address=true

# Gateway Routes
spring.cloud.gateway.routes[0].id=playlizt-authentication
spring.cloud.gateway.routes[0].uri=${AUTH_SERVICE_URL:lb://playlizt-authentication}
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/auth/**

spring.cloud.gateway.routes[1].id=playlizt-content-api
spring.cloud.gateway.routes[1].uri=${CONTENT_SERVICE_URL:lb://playlizt-content-api}
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/v1/content/**

spring.cloud.gateway.routes[2].id=playlizt-playback
spring.cloud.gateway.routes[2].uri=${PLAYBACK_SERVICE_URL:lb://playlizt-playback}
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/v1/playback/**

spring.cloud.gateway.routes[3].id=playlizt-content-processing
spring.cloud.gateway.routes[3].uri=${AI_SERVICE_URL:lb://playlizt-content-processing}
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/v1/ai/**

spring.cloud.gateway.routes[4].id=playlizt-category-route
spring.cloud.gateway.routes[4].uri=${CONTENT_SERVICE_URL:lb://playlizt-content-api}
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/v1/categories/**

spring.cloud.gateway.routes[5].id=playlizt-tag-route
spring.cloud.gateway.routes[5].uri=${CONTENT_SERVICE_URL:lb://playlizt-content-api}
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/v1/tags/**

# CORS Configuration
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedOrigins=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedMethods=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedHeaders=*

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,gateway
management.endpoint.health.show-details=always
management.endpoint.health.probes.enabled=true
management.health.livenessState.enabled=true
management.health.readinessState.enabled=true

# Redis Configuration
# spring.data.redis.host=${REDIS_HOST}
# spring.data.redis.port=${REDIS_PORT}

# Rate Limiter Configuration
# spring.cloud.gateway.default-filters[0].name=RequestRateLimiter
# spring.cloud.gateway.default-filters[0].args.redis-rate-limiter.replenishRate=10
# spring.cloud.gateway.default-filters[0].args.redis-rate-limiter.burstCapacity=20
# spring.cloud.gateway.default-filters[0].args.key-resolver=#{@userKeyResolver}
spring.cloud.gateway.default-filters[0].name=SecureHeaders

# Logging Configuration
logging.level.root=INFO
logging.level.zw.co.t3ratech.playlizt=DEBUG
logging.level.org.springframework.cloud.gateway=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %msg%n
logging.file.name=/var/log/playlizt/playlizt-api-gateway.log
